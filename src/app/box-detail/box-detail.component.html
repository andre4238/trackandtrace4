<div class="box-detail-container" [class.open]="isOpen">
  <div class="headerbox">
    <h2>{{ task.name }}</h2>
    <button class="close-btn" (click)="close()">Ã—</button>
  </div>
  <div class="box-detail-content">
    <div class="custom-fields">
      <ul>
        <li>
          <strong>Spedition:</strong> {{ spedition }}
        </li>
        <li>
          <strong>Trackingnummer:</strong> {{ trackingNumber }}
        </li>
      </ul>
    </div>

    <div class="subtasks">
      <ul>
        <li *ngFor="let subtask of subtasks" [class]="getSubtaskClass(subtask.name)">
          {{ subtask.name }}
        </li>
      </ul>
    </div>

    <div *ngIf="fedexStatus" class="fedex-status-container">
      <h3><b>FedEx Tracking Status</b></h3>
      <div class="fedex-status-box">
        <h4>Tracking Information</h4>
        <p><strong>Tracking Number:</strong> {{ fedexStatus.trackingNumber }}</p>
        <p><strong>Status:</strong> {{ fedexStatus.status }}</p>
        <p><strong>Status Date:</strong> {{ fedexStatus.statusDate }}</p>
      </div>

      <div class="fedex-status-box" *ngIf="fedexStatus.recipient">
        <h4>Recipient Information</h4>
        <p><strong>City:</strong> {{ fedexStatus.recipient.city }}</p>
        <p><strong>Country:</strong> {{ fedexStatus.recipient.countryName }} ({{ fedexStatus.recipient.countryCode }})</p>
      </div>

      <div class="fedex-status-box" *ngIf="fedexStatus.weight">
        <h4>Weight</h4>
        <ul>
          <li *ngFor="let weight of fedexStatus.weight">
            {{ weight.value }} {{ weight.unit }}
          </li>
        </ul>
      </div>

      <div class="fedex-status-box" *ngIf="fedexStatus.deliveryDetails">
        <h4>Delivery Details</h4>
        <p><strong>Actual Delivery Address:</strong> {{ fedexStatus.deliveryDetails.actualDeliveryAddress.city }}, {{ fedexStatus.deliveryDetails.actualDeliveryAddress.countryName }} ({{ fedexStatus.deliveryDetails.actualDeliveryAddress.countryCode }})</p>
        <p><strong>Location Type:</strong> {{ fedexStatus.deliveryDetails.locationType }}</p>
        <p><strong>Location Description:</strong> {{ fedexStatus.deliveryDetails.locationDescription }}</p>
        <p><strong>Delivery Attempts:</strong> {{ fedexStatus.deliveryDetails.deliveryAttempts }}</p>
        <p><strong>Received By:</strong> {{ fedexStatus.deliveryDetails.receivedByName }}</p>
      </div>
    </div>
  </div>
</div>
